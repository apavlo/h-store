<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_60) on Thu Jun 18 16:18:50 EDT 2015 -->
<title>ClassEnhancer (Oracle - Berkeley DB Java API)</title>
<meta name="date" content="2015-06-18">
<link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ClassEnhancer (Oracle - Berkeley DB Java API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ClassEnhancer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><em><b>Berkeley DB</b><br><font size="-1"> version 6.1.26</font></em></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/sleepycat/persist/model/AnnotationModel.html" title="class in com.sleepycat.persist.model"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/sleepycat/persist/model/ClassMetadata.html" title="class in com.sleepycat.persist.model"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/sleepycat/persist/model/ClassEnhancer.html" target="_top">Frames</a></li>
<li><a href="ClassEnhancer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.sleepycat.persist.model</div>
<h2 title="Class ClassEnhancer" class="title">Class ClassEnhancer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.sleepycat.persist.model.ClassEnhancer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.instrument.ClassFileTransformer</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">ClassEnhancer</span>
extends java.lang.Object
implements java.lang.instrument.ClassFileTransformer</pre>
<div class="block">Enhances the bytecode of persistent classes to provide efficient access to
 fields and constructors, and to avoid special security policy settings for
 accessing non-public members.  Classes are enhanced if they are annotated
 with <a href="../../../../com/sleepycat/persist/model/Entity.html" title="annotation in com.sleepycat.persist.model"><code>Entity</code></a> or <a href="../../../../com/sleepycat/persist/model/Persistent.html" title="annotation in com.sleepycat.persist.model"><code>Persistent</code></a>.

 <p><code>ClassEnhancer</code> objects are thread-safe.  Multiple threads may
 safely call the methods of a shared <code>ClassEnhancer</code> object.</p>

 <p>As described in the <a
 href="../package-summary.html#bytecode">package summary</a>, bytecode
 enhancement may be used either at runtime or offline (at build time).</p>

 <p>To use enhancement offline, this class may be used as a <a href="../../../../com/sleepycat/persist/model/ClassEnhancer.html#main(java.lang.String[])"><code>main
 program</code></a>.  
 </p>

 <p>For enhancement at runtime, this class provides the low level support
 needed to transform class bytes during class loading.  To configure runtime
 enhancement you may use one of the following approaches:</p>
 <ol>
 <li>The BDB <code>je-&lt;version&gt;.jar</code> or <code>db.jar</code> file may be used as
 an instrumentation agent as follows:
 <pre class="code">java -javaagent:&lt;BDB-JAR-FILE&gt;=enhance:packageNames ...</pre>
 <code>packageNames</code> is a comma separated list of packages containing
 persistent classes.  Sub-packages of these packages are also searched.  If
 <code>packageNames</code> is omitted then all packages known to the current
 classloader are searched.
 <p>The "-v" option may be included in the comma separated list to print the
 name of each class that is enhanced.</p></li>
 <br>
 <li>The <a href="../../../../com/sleepycat/persist/model/ClassEnhancer.html#enhance(java.lang.String,%20byte[])"><code>enhance(java.lang.String, byte[])</code></a> method may be called to implement a class loader
 that performs enhancement.  Using this approach, it is the developer's
 responsibility to implement and configure the class loader.</li>
 </ol></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../com/sleepycat/persist/model/ClassEnhancer.html#ClassEnhancer()">ClassEnhancer</a></strong>()</code>
<div class="block">Creates a class enhancer that searches all packages.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../com/sleepycat/persist/model/ClassEnhancer.html#ClassEnhancer(java.util.Set)">ClassEnhancer</a></strong>(java.util.Set&lt;java.lang.String&gt;&nbsp;packageNames)</code>
<div class="block">Creates a class enhancer that searches a given set of packages.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../com/sleepycat/persist/model/ClassEnhancer.html#enhance(java.lang.String,%20byte[])">enhance</a></strong>(java.lang.String&nbsp;className,
       byte[]&nbsp;classBytes)</code>
<div class="block">Enhances the given class bytes if the class is annotated with <a href="../../../../com/sleepycat/persist/model/Entity.html" title="annotation in com.sleepycat.persist.model"><code>Entity</code></a> or <a href="../../../../com/sleepycat/persist/model/Persistent.html" title="annotation in com.sleepycat.persist.model"><code>Persistent</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/sleepycat/persist/model/ClassEnhancer.html#getVerbose()">getVerbose</a></strong>()</code>
<div class="block">Gets verbose mode.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/sleepycat/persist/model/ClassEnhancer.html#main(java.lang.String[])">main</a></strong>(java.lang.String[]&nbsp;args)</code>
<div class="block">Enhances classes in the directories specified.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/sleepycat/persist/model/ClassEnhancer.html#premain(java.lang.String,%20java.lang.instrument.Instrumentation)">premain</a></strong>(java.lang.String&nbsp;args,
       java.lang.instrument.Instrumentation&nbsp;inst)</code>
<div class="block">Enhances classes as specified by a JVM -javaagent argument.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/sleepycat/persist/model/ClassEnhancer.html#setVerbose(boolean)">setVerbose</a></strong>(boolean&nbsp;verbose)</code>
<div class="block">Sets verbose mode.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../com/sleepycat/persist/model/ClassEnhancer.html#transform(java.lang.ClassLoader,%20java.lang.String,%20java.lang.Class,%20java.security.ProtectionDomain,%20byte[])">transform</a></strong>(java.lang.ClassLoader&nbsp;loader,
         java.lang.String&nbsp;className,
         java.lang.Class&lt;?&gt;&nbsp;classBeingRedefined,
         java.security.ProtectionDomain&nbsp;protectionDomain,
         byte[]&nbsp;classfileBuffer)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ClassEnhancer()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ClassEnhancer</h4>
<pre>public&nbsp;ClassEnhancer()</pre>
<div class="block">Creates a class enhancer that searches all packages.</div>
</li>
</ul>
<a name="ClassEnhancer(java.util.Set)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ClassEnhancer</h4>
<pre>public&nbsp;ClassEnhancer(java.util.Set&lt;java.lang.String&gt;&nbsp;packageNames)</pre>
<div class="block">Creates a class enhancer that searches a given set of packages.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>packageNames</code> - a set of packages to search for persistent
 classes.  Sub-packages of these packages are also searched.  If empty or
 null, all packages known to the current classloader are searched.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="main(java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)
                 throws java.lang.Exception</pre>
<div class="block">Enhances classes in the directories specified.  The class files are
 replaced when they are enhanced, without changing the file modification
 date.  For example:

 <pre class="code">java -cp je-&lt;version&gt;.jar com.sleepycat.persist.model.ClassEnhancer ./classes</pre>

 <p>The "-v" argument may be specified to print the name of each class
 file that is enhanced.  The total number of class files enhanced will
 always be printed.</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>args</code> - one or more directories containing classes to be enhanced.
 Subdirectories of these directories will also be searched.  Optionally,
 -v may be included to print the name of every class file enhanced.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Exception</code></dd></dl>
</li>
</ul>
<a name="premain(java.lang.String, java.lang.instrument.Instrumentation)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>premain</h4>
<pre>public static&nbsp;void&nbsp;premain(java.lang.String&nbsp;args,
           java.lang.instrument.Instrumentation&nbsp;inst)</pre>
<div class="block">Enhances classes as specified by a JVM -javaagent argument.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><code>Instrumentation</code></dd></dl>
</li>
</ul>
<a name="setVerbose(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setVerbose</h4>
<pre>public&nbsp;void&nbsp;setVerbose(boolean&nbsp;verbose)</pre>
<div class="block">Sets verbose mode.

 <p>True may be specified to print the name of each class file that is
 enhanced.  This property is false by default.</p></div>
</li>
</ul>
<a name="getVerbose()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVerbose</h4>
<pre>public&nbsp;boolean&nbsp;getVerbose()</pre>
<div class="block">Gets verbose mode.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../com/sleepycat/persist/model/ClassEnhancer.html#setVerbose(boolean)"><code>setVerbose(boolean)</code></a></dd></dl>
</li>
</ul>
<a name="transform(java.lang.ClassLoader, java.lang.String, java.lang.Class, java.security.ProtectionDomain, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transform</h4>
<pre>public&nbsp;byte[]&nbsp;transform(java.lang.ClassLoader&nbsp;loader,
               java.lang.String&nbsp;className,
               java.lang.Class&lt;?&gt;&nbsp;classBeingRedefined,
               java.security.ProtectionDomain&nbsp;protectionDomain,
               byte[]&nbsp;classfileBuffer)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>transform</code>&nbsp;in interface&nbsp;<code>java.lang.instrument.ClassFileTransformer</code></dd>
</dl>
</li>
</ul>
<a name="enhance(java.lang.String, byte[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>enhance</h4>
<pre>public&nbsp;byte[]&nbsp;enhance(java.lang.String&nbsp;className,
             byte[]&nbsp;classBytes)</pre>
<div class="block">Enhances the given class bytes if the class is annotated with <a href="../../../../com/sleepycat/persist/model/Entity.html" title="annotation in com.sleepycat.persist.model"><code>Entity</code></a> or <a href="../../../../com/sleepycat/persist/model/Persistent.html" title="annotation in com.sleepycat.persist.model"><code>Persistent</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>className</code> - the class name in binary format; for example,
 "my.package.MyClass$Name", or null if no filtering by class name
 should be performed.</dd><dd><code>classBytes</code> - are the class file bytes to be enhanced.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the enhanced bytes, or null if no enhancement was performed.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ClassEnhancer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><em><b>Berkeley DB</b><br><font size="-1"> version 6.1.26</font></em></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/sleepycat/persist/model/AnnotationModel.html" title="class in com.sleepycat.persist.model"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/sleepycat/persist/model/ClassMetadata.html" title="class in com.sleepycat.persist.model"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/sleepycat/persist/model/ClassEnhancer.html" target="_top">Frames</a></li>
<li><a href="ClassEnhancer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><font size=1>Copyright (c) 1996, 2015 Oracle and/or its affiliates.  All rights reserved.</font></small></p>
</body>
</html>
